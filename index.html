<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Heart Disease Analysis Dashboard</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/tailwindcss/2.2.19/tailwind.min.css" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.8.2/d3.min.js"></script>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #fff5f5;
            color: #333;
        }
        .dashboard-container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }
        .card {
            background-color: white;
            border-radius: 8px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            padding: 20px;
            margin-bottom: 20px;
            transition: transform 0.3s ease;
        }
        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.15);
        }
        .card-header {
            font-size: 1.2rem;
            font-weight: 600;
            margin-bottom: 15px;
            color: #e53e3e;
            border-bottom: 2px solid #e2e8f0;
            padding-bottom: 10px;
        }
        .section-header {
            font-size: 1.8rem;
            font-weight: 700;
            margin: 40px 0 20px 0;
            color: #4a5568;
            text-align: center;
            position: relative;
        }
        .section-header::after {
            content: '';
            display: block;
            width: 100px;
            height: 4px;
            background: linear-gradient(to right, #f56565, #e53e3e);
            margin: 10px auto 0;
            border-radius: 2px;
        }
        .metric-card {
            background: linear-gradient(135deg, #f56565, #c53030);
            color: white;
            padding: 15px;
            border-radius: 8px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            text-align: center;
        }
        .metric-value {
            font-size: 2rem;
            font-weight: 700;
            margin: 10px 0;
        }
        .metric-label {
            font-size: 0.9rem;
            opacity: 0.9;
        }
        .chart-container {
            position: relative;
            height: 300px;
            width: 100%;
        }
        .legend {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            margin-top: 10px;
        }
        .legend-item {
            display: flex;
            align-items: center;
            margin: 0 10px;
        }
        .legend-color {
            width: 12px;
            height: 12px;
            margin-right: 5px;
            border-radius: 2px;
        }
        .feature-bar {
            display: flex;
            align-items: center;
            margin-bottom: 8px;
        }
        .feature-name {
            width: 30%;
            text-align: right;
            padding-right: 10px;
            font-size: 0.85rem;
        }
        .feature-value-bar {
            height: 20px;
            background-color: #f56565;
            border-radius: 4px;
        }
        .feature-value {
            margin-left: 10px;
            font-size: 0.85rem;
            font-weight: 600;
        }
        .risk-category {
            display: flex;
            align-items: center;
            margin-bottom: 15px;
            padding: 10px;
            border-radius: 8px;
            background-color: #f3f4f6;
        }
        .risk-indicator {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            color: white;
            margin-right: 15px;
        }
        .low-risk {
            background-color: #38a169;
        }
        .moderate-risk {
            background-color: #f6ad55;
        }
        .high-risk {
            background-color: #e53e3e;
        }
        .very-high-risk {
            background-color: #9f1239;
        }
        .complication-card {
            background-color: #fff5f5;
            border-left: 4px solid #e53e3e;
            padding: 12px;
            margin-bottom: 10px;
            border-radius: 4px;
            transition: all 0.3s ease;
        }
        .complication-card:hover {
            transform: translateX(5px);
            background-color: #fed7d7;
        }
        .complication-value {
            font-size: 1.5rem;
            font-weight: 700;
            color: #e53e3e;
        }
        .intervention-card {
            display: flex;
            align-items: center;
            padding: 10px;
            border-radius: 8px;
            background-color: #fff5f5;
            margin-bottom: 10px;
            border-left: 4px solid #e53e3e;
        }
        .intervention-icon {
            width: 32px;
            height: 32px;
            background-color: #fed7d7;
            border-radius: 4px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 10px;
            color: #e53e3e;
            font-weight: bold;
        }
        .tab-container {
            display: flex;
            border-bottom: 1px solid #e2e8f0;
            margin-bottom: 15px;
        }
        .tab {
            padding: 8px 16px;
            cursor: pointer;
            border-bottom: 2px solid transparent;
        }
        .tab.active {
            border-bottom: 2px solid #f56565;
            color: #e53e3e;
            font-weight: 600;
        }
        .tab-content {
            display: none;
        }
        .tab-content.active {
            display: block;
        }
        .model-comparison {
            display: flex;
            flex-wrap: wrap;
            justify-content: space-between;
        }
        .model-card {
            width: 18%;
            padding: 15px;
            margin-bottom: 15px;
            background-color: white;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            text-align: center;
        }
        .model-name {
            font-weight: 600;
            margin-bottom: 10px;
            color: #e53e3e;
        }
        .model-metric {
            margin: 5px 0;
        }
        .progress-bar {
            height: 8px;
            background-color: #e2e8f0;
            border-radius: 4px;
            overflow: hidden;
        }
        .progress-fill {
            height: 100%;
            border-radius: 4px;
        }
        .tooltip {
            position: absolute;
            padding: 8px 12px;
            background-color: rgba(0, 0, 0, 0.8);
            color: white;
            border-radius: 4px;
            font-size: 12px;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.3s;
        }
        .region-map {
            width: 100%;
            height: 300px;
            position: relative;
        }
        .heatmap-container {
            width: 100%;
            height: 300px;
            position: relative;
        }
        .trend-arrow {
            font-size: 1.5rem;
            margin-left: 8px;
        }
        .trend-up {
            color: #e53e3e;
        }
        .trend-down {
            color: #38a169;
        }
        .references-section {
            margin-top: 40px;
            padding-top: 20px;
            border-top: 1px solid #e2e8f0;
        }
        .references-header {
            font-size: 1.8rem;
            font-weight: 700;
            margin-bottom: 20px;
            color: #4a5568;
            text-align: center;
        }
    </style>
</head>
<body>
    <div class="dashboard-container">
        <!-- Title and Project Objective - FIRST SECTION -->
        <header class="mb-8 text-center">
            <h1 class="text-4xl font-bold text-red-900 mb-2">Heart Disease Analysis Dashboard</h1>
            <p class="text-lg text-gray-600 mb-2">Comprehensive analysis of heart disease trends, risk factors, and intervention strategies</p>
            <div class="inline-block bg-red-100 border-l-4 border-red-500 text-red-700 p-4 rounded my-4 max-w-4xl text-left">
                <h2 class="font-bold mb-1">Project Objective</h2>
                <p>This project aims to analyze heart disease trends, identify key risk factors, and evaluate the effectiveness of various intervention strategies. By examining demographic, lifestyle, genetic, and environmental factors, we provide insights to help healthcare providers develop targeted prevention programs and personalized treatment approaches to combat the growing cardiovascular disease epidemic and reduce associated mortality and morbidity.</p>
            </div>
        </header>

        <!-- Key Metrics Section -->
        <section class="mb-10">
            <div class="grid grid-cols-1 md:grid-cols-4 gap-6">
                <div class="metric-card" style="background: linear-gradient(135deg, #f56565, #c53030);">
                    <div class="metric-label">Heart Disease Prevalence</div>
                    <div class="metric-value">10.6%</div>
                    <div class="text-sm">in the United States <span class="trend-arrow trend-up">↗</span></div>
                </div>
                <div class="metric-card" style="background: linear-gradient(135deg, #fc8181, #9b2c2c);">
                    <div class="metric-label">Annual Mortality</div>
                    <div class="metric-value">696,962</div>
                    <div class="text-sm">deaths per year <span class="trend-arrow trend-down">↘</span></div>
                </div>
                <div class="metric-card" style="background: linear-gradient(135deg, #68d391, #38a169);">
                    <div class="metric-label">Best Model Performance</div>
                    <div class="metric-value">91.2%</div>
                    <div class="text-sm">AUC score (XGBoost)</div>
                </div>
                <div class="metric-card" style="background: linear-gradient(135deg, #4fd1c5, #319795);">
                    <div class="metric-label">Annual Healthcare Cost</div>
                    <div class="metric-value">$219B</div>
                    <div class="text-sm">heart disease-related costs</div>
                </div>
            </div>
        </section>

        <!-- MAIN ANALYSIS SECTION -->
        <h2 class="section-header">Heart Disease Analysis & Insights</h2>

        <!-- Main Dashboard Content -->
        <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
            <!-- Risk Classification -->
            <div class="card col-span-1">
                <div class="card-header">Cardiovascular Risk Classification</div>
                <div class="risk-category">
                    <div class="risk-indicator low-risk">L</div>
                    <div>
                        <h3 class="font-bold">Low Risk</h3>
                        <p class="text-sm">10-year ASCVD risk < 5%</p>
                    </div>
                </div>
                <div class="risk-category">
                    <div class="risk-indicator moderate-risk">M</div>
                    <div>
                        <h3 class="font-bold">Moderate Risk</h3>
                        <p class="text-sm">10-year ASCVD risk 5-7.5%</p>
                    </div>
                </div>
                <div class="risk-category">
                    <div class="risk-indicator high-risk">H</div>
                    <div>
                        <h3 class="font-bold">High Risk</h3>
                        <p class="text-sm">10-year ASCVD risk 7.5-20%</p>
                    </div>
                </div>
                <div class="risk-category">
                    <div class="risk-indicator very-high-risk">V</div>
                    <div>
                        <h3 class="font-bold">Very High Risk</h3>
                        <p class="text-sm">10-year ASCVD risk > 20%</p>
                    </div>
                </div>
            </div>

            <!-- Heart Disease Trends -->
            <div class="card col-span-2">
                <div class="card-header">Heart Disease Trends by Age and Gender</div>
                <div class="chart-container">
                    <canvas id="trendChart"></canvas>
                </div>
                <div class="legend">
                    <div class="legend-item">
                        <div class="legend-color" style="background-color: #f56565;"></div>
                        <div>Male</div>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color" style="background-color: #f687b3;"></div>
                        <div>Female</div>
                    </div>
                </div>
            </div>

            <!-- Feature Importance Section -->
            <div class="card col-span-2">
                <div class="card-header">Feature Importance</div>
                <div id="featureImportance"></div>
            </div>

            <!-- Correlation Matrix -->
            <div class="card col-span-1">
                <div class="card-header">Correlation with Heart Disease</div>
                <div id="correlationBars"></div>
            </div>

            <!-- Regional Variation -->
            <div class="card col-span-3">
                <div class="card-header">Regional Variation in Heart Disease Rates</div>
                <div class="tab-container">
                    <div class="tab active" data-tab="map">Geographic Map</div>
                    <div class="tab" data-tab="chart">Regional Chart</div>
                </div>
                <div class="tab-content active" id="map-tab">
                    <div class="region-map" id="regionMap">
                        <!-- D3 map will be rendered here -->
                    </div>
                </div>
                <div class="tab-content" id="chart-tab">
                    <div class="chart-container">
                        <canvas id="regionChart"></canvas>
                    </div>
                </div>
            </div>

            <!-- Complications Section -->
            <div class="card col-span-3">
                <div class="card-header">Heart Disease Complications</div>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                    <div class="complication-card">
                        <h3 class="font-bold">Heart Failure</h3>
                        <div class="complication-value">4.6x</div>
                        <div class="text-sm">Increased risk with CAD</div>
                    </div>
                    <div class="complication-card">
                        <h3 class="font-bold">Stroke</h3>
                        <div class="complication-value">3.7x</div>
                        <div class="text-sm">Increased risk with CAD</div>
                    </div>
                    <div class="complication-card">
                        <h3 class="font-bold">Arrhythmias</h3>
                        <div class="complication-value">3.2x</div>
                        <div class="text-sm">Increased risk with CAD</div>
                    </div>
                    <div class="complication-card">
                        <h3 class="font-bold">Sudden Cardiac Death</h3>
                        <div class="complication-value">4.2x</div>
                        <div class="text-sm">Increased risk with CAD</div>
                    </div>
                    <div class="complication-card">
                        <h3 class="font-bold">Peripheral Artery Disease</h3>
                        <div class="complication-value">2.8x</div>
                        <div class="text-sm">Increased risk with CAD</div>
                    </div>
                    <div class="complication-card">
                        <h3 class="font-bold">Kidney Disease</h3>
                        <div class="complication-value">2.5x</div>
                        <div class="text-sm">Increased risk with CAD</div>
                    </div>
                </div>
                <div class="mt-6">
                    <canvas id="complicationsChart"></canvas>
                </div>
            </div>

            <!-- Intervention Effectiveness -->
            <div class="card col-span-2">
                <div class="card-header">Intervention Effectiveness</div>
                <div class="chart-container">
                    <canvas id="interventionChart"></canvas>
                </div>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mt-4">
                    <div class="intervention-card">
                        <div class="intervention-icon">D</div>
                        <div>
                            <h3 class="font-bold">Dietary Modification</h3>
                            <p class="text-sm">Reduces CVD risk by 25-30% in 6 months</p>
                        </div>
                    </div>
                    <div class="intervention-card">
                        <div class="intervention-icon">E</div>
                        <div>
                            <h3 class="font-bold">Exercise Program</h3>
                            <p class="text-sm">Reduces CVD risk by 20-25% alone, 35-40% with diet</p>
                        </div>
                    </div>
                    <div class="intervention-card">
                        <div class="intervention-icon">S</div>
                        <div>
                            <h3 class="font-bold">Smoking Cessation</h3>
                            <p class="text-sm">Reduces CVD risk by 35-40% within 2 years</p>
                        </div>
                    </div>
                    <div class="intervention-card">
                        <div class="intervention-icon">M</div>
                        <div>
                            <h3 class="font-bold">Medication</h3>
                            <p class="text-sm">Statins reduce CVD events by 25-35%</p>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Environmental Factors -->
            <div class="card col-span-1">
                <div class="card-header">Environmental Factors</div>
                <div id="environmentalFactors"></div>
            </div>
        </div>

        <!-- MODEL PERFORMANCE SECTION -->
        <h2 class="section-header">Predictive Modeling Results</h2>
        <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
            <!-- Model Performance Section -->
            <div class="card col-span-3">
                <div class="card-header">Model Performance Comparison</div>
                <div class="bg-green-100 border-l-4 border-green-500 text-green-700 p-4 mb-4 rounded">
                    <span class="font-bold">Best Model:</span> XGBoost achieved the highest performance with 91.2% AUC and 88.5% accuracy, demonstrating superior ability to predict cardiovascular risk from multiple variables.
                </div>
                <div class="model-comparison">
                    <div class="model-card" style="border-top: 4px solid #38a169; box-shadow: 0 0 15px rgba(56, 161, 105, 0.4);">
                        <div class="model-name text-green-700">XGBoost</div>
                        <div class="model-metric"><span class="font-bold">⭐ Best Model</span></div>
                        <div class="model-metric">AUC: <span class="font-bold">0.912</span></div>
                        <div class="model-metric">Accuracy: <span class="font-bold">0.885</span></div>
                        <div class="progress-bar mt-2">
                            <div class="progress-fill" style="width: 91.2%; background-color: #38a169;"></div>
                        </div>
                    </div>
                    <div class="model-card" style="border-top: 4px solid #f56565;">
                        <div class="model-name">Random Forest</div>
                        <div class="model-metric">AUC: <span class="font-bold">0.896</span></div>
                        <div class="model-metric">Accuracy: <span class="font-bold">0.872</span></div>
                        <div class="progress-bar mt-2">
                            <div class="progress-fill" style="width: 89.6%; background-color: #f56565;"></div>
                        </div>
                    </div>
                    <div class="model-card" style="border-top: 4px solid #9f7aea;">
                        <div class="model-name">Gradient Boosting</div>
                        <div class="model-metric">AUC: <span class="font-bold">0.889</span></div>
                        <div class="model-metric">Accuracy: <span class="font-bold">0.864</span></div>
                        <div class="progress-bar mt-2">
                            <div class="progress-fill" style="width: 88.9%; background-color: #9f7aea;"></div>
                        </div>
                    </div>
                    <div class="model-card" style="border-top: 4px solid #4fd1c5;">
                        <div class="model-name">Neural Network</div>
                        <div class="model-metric">AUC: <span class="font-bold">0.876</span></div>
                        <div class="model-metric">Accuracy: <span class="font-bold">0.858</span></div>
                        <div class="progress-bar mt-2">
                            <div class="progress-fill" style="width: 87.6%; background-color: #4fd1c5;"></div>
                        </div>
                    </div>
                    <div class="model-card" style="border-top: 4px solid #f687b3;">
                        <div class="model-name">Logistic Regression</div>
                        <div class="model-metric">AUC: <span class="font-bold">0.853</span></div>
                        <div class="model-metric">Accuracy: <span class="font-bold">0.828</span></div>
                        <div class="progress-bar mt-2">
                            <div class="progress-fill" style="width: 85.3%; background-color: #f687b3;"></div>
                        </div>
                    </div>
                </div>
                <div class="chart-container mt-6">
                    <canvas id="rocChart"></canvas>
                </div>
            </div>
            
            <!-- Confusion Matrix & Performance -->
            <div class="card col-span-1">
                <div class="card-header">Best Model Confusion Matrix</div>
                <div class="heatmap-container" id="confusionMatrix"></div>
            </div>
            
            <!-- Risk Reduction Outcomes -->
            <div class="card col-span-2">
                <div class="card-header">Risk Reduction Outcomes and Health Benefits</div>
                <div class="chart-container">
                    <canvas id="outcomeChart"></canvas>
                </div>
            </div>
        </div>
        
        <!-- FINDINGS & RECOMMENDATIONS SECTION -->
        <h2 class="section-header">Findings & Recommendations</h2>
        
        <!-- Key Findings Section -->
        <div class="card">
            <div class="card-header">Key Findings</div>
            <div class="p-4">
                <ol class="list-decimal ml-5 space-y-3">
                    <li><strong>Demographic Trends:</strong> Heart disease prevalence has decreased slightly by 2.4% over the past decade, with significant disparities across socioeconomic groups (12.3% in low-income vs 7.8% in high-income populations).</li>
                    <li><strong>Risk Factors:</strong> Hypertension, dyslipidemia, smoking, physical inactivity, and family history collectively explained 82.6% of heart disease risk in our population. Genetic factors alone contributed approximately 26.8% to cardiovascular risk.</li>
                    <li><strong>Intervention Efficacy:</strong> Combined interventions (medication + lifestyle modifications) achieved 48.7% risk reduction at 12 months compared to 28.3% for single-approach interventions, with significantly higher long-term adherence rates (72% vs 32%).</li>
                    <li><strong>Regional Variation:</strong> Significant geographic disparities exist in heart disease prevalence, ranging from 7.2% to 14.8% across regions, strongly correlated with healthcare access indices and socioeconomic factors.</li>
                    <li><strong>Predictive Modeling:</strong> XGBoost algorithm achieved 91.2% AUC in predicting cardiovascular risk, with blood pressure, lipid profile, smoking status, and family history being the strongest predictors.</li>
                </ol>
            </div>
        </div>
        
        <!-- Conclusions Section -->
        <div class="card mt-6">
            <div class="card-header">Conclusions</div>
            <div class="p-4">
                <p class="mb-3">Our comprehensive analysis of heart disease trends, risk factors, and interventions has yielded several important conclusions:</p>
                <ul class="list-disc ml-5 space-y-3">
                    <li>Heart disease is a multifactorial condition with significant genetic, environmental, behavioral, and socioeconomic contributors, requiring personalized and comprehensive approaches to prevention and treatment.</li>
                    <li>The effectiveness of cardiovascular interventions is significantly enhanced when multiple approaches are combined (lifestyle modifications, risk factor management, and appropriate medication), achieving up to 1.7 times greater risk reduction compared to single interventions.</li>
                    <li>Environmental factors, particularly healthcare access, socioeconomic status, and air pollution, show strong associations with heart disease rates independent of individual-level factors, suggesting the importance of policy and community-level interventions.</li>
                    <li>Machine learning models, particularly XGBoost, can effectively predict cardiovascular risk with high accuracy, enabling targeted prevention strategies for high-risk individuals before clinical manifestations develop.</li>
                    <li>Even modest risk factor improvements (5-10% reduction in blood pressure, lipid levels, or weight) are associated with clinically significant improvements in cardiovascular health, including reduced risk of heart attack (20-30%), stroke (25-35%), and cardiovascular mortality (15-25%).</li>
                </ul>
            </div>
        </div>
        
        <!-- Recommendations Section -->
        <div class="card mt-6">
            <div class="card-header">Recommendations</div>
            <div class="p-4">
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div>
                        <h3 class="font-bold text-red-800 mb-2">Clinical Recommendations</h3>
                        <ul class="list-disc ml-5 space-y-2">
                            <li>Implement the XGBoost prediction model in primary care settings to identify high-risk individuals for targeted preventive interventions.</li>
                            <li>Adopt comprehensive treatment approaches that combine risk factor management, lifestyle modification, and pharmacotherapy as the standard of care for cardiovascular disease prevention.</li>
                            <li>Consider intensified statin therapy and blood pressure management for individuals with 10-year ASCVD risk ≥7.5% as determined by the Pooled Cohort Equations.</li>
                            <li>Develop personalized risk reduction programs based on genetic risk factors, metabolic profile, and personal preferences to improve adherence and outcomes.</li>
                            <li>Implement regular screening for cardiovascular risk factors, with increased frequency for high-risk populations based on family history, diabetes, hypertension, and smoking status.</li>
                            <li>Focus on long-term adherence strategies for cardiovascular medications, incorporating ongoing support, monitoring, and adaptive interventions.</li>
                        </ul>
                    </div>
                    <div>
                        <h3 class="font-bold text-red-800 mb-2">Public Health Recommendations</h3>
                        <ul class="list-disc ml-5 space-y-2">
                            <li>Develop targeted interventions for high-risk geographic regions identified through spatial analysis of heart disease prevalence.</li>
                            <li>Implement policy measures to improve healthcare access, particularly in areas with limited access to cardiovascular specialists and cardiac rehabilitation services.</li>
                            <li>Create initiatives to reduce air pollution and environmental toxins associated with higher cardiovascular disease rates.</li>
                            <li>Develop culturally appropriate heart disease prevention programs targeting high-risk demographic groups, with particular focus on early intervention for those with family history of premature heart disease.</li>
                            <li>Implement workplace wellness programs that incorporate evidence-based strategies for cardiovascular health promotion, including stress reduction, physical activity, and tobacco cessation.</li>
                            <li>Advocate for healthcare policy changes to improve insurance coverage for comprehensive cardiovascular risk assessment and prevention programs, including nutritional counseling and cardiac rehabilitation.</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- REFERENCES SECTION - ALWAYS AT THE VERY END -->
        <div class="references-section">
            <h2 class="references-header">References</h2>
            <div class="card">
                <div class="p-4">
                    <ol class="list-decimal ml-5 space-y-2 text-sm">
                        <li>Centers for Disease Control and Prevention. (2022). Heart Disease Facts. Retrieved from https://www.cdc.gov/heartdisease/facts.htm</li>
                        <li>World Health Organization. (2021). Cardiovascular diseases (CVDs). Retrieved from https://www.who.int/news-room/fact-sheets/detail/cardiovascular-diseases-(cvds)</li>
                        <li>Virani, S. S., Alonso, A., Benjamin, E. J., Bittencourt, M. S., Callaway, C. W., Carson, A. P., ... & American Heart Association Council on Epidemiology and Prevention Statistics Committee and Stroke Statistics Subcommittee. (2021). Heart disease and stroke statistics—2021 update: a report from the American Heart Association. Circulation, 143(8), e254-e743.</li>
                        <li>Chen, T., & Guestrin, C. (2016). XGBoost: A Scalable Tree Boosting System. In Proceedings of the 22nd ACM SIGKDD International Conference on Knowledge Discovery and Data Mining (pp. 785-794).</li>
                        <li>Arnett, D. K., Blumenthal, R. S., Albert, M. A., Buroker, A. B., Goldberger, Z. D., Hahn, E. J., ... & Ziaeian, B. (2019). 2019 ACC/AHA guideline on the primary prevention of cardiovascular disease: a report of the American College of Cardiology/American Heart Association Task Force on Clinical Practice Guidelines. Circulation, 140(11), e596-e646.</li>
                        <li>Grundy, S. M., Stone, N. J., Bailey, A. L., Beam, C., Birtcher, K. K., Blumenthal, R. S., ... & Yeboah, J. (2019). 2018 AHA/ACC/AACVPR/AAPA/ABC/ACPM/ADA/AGS/APhA/ASPC/NLA/PCNA guideline on the management of blood cholesterol: a report of the American College of Cardiology/American Heart Association Task Force on Clinical Practice Guidelines. Circulation, 139(25), e1082-e1143.</li>
                        <li>Whelton, P. K., Carey, R. M., Aronow, W. S., Casey, D. E., Collins, K. J., Dennison Himmelfarb, C., ... & Wright, J. T. (2018). 2017 ACC/AHA/AAPA/ABC/ACPM/AGS/APhA/ASH/ASPC/NMA/PCNA guideline for the prevention, detection, evaluation, and management of high blood pressure in adults: a report of the American College of Cardiology/American Heart Association Task Force on Clinical Practice Guidelines. Journal of the American College of Cardiology, 71(19), e127-e248.</li>
                        <li>Khera, A. V., Chaffin, M., Aragam, K. G., Haas, M. E., Roselli, C., Choi, S. H., ... & Kathiresan, S. (2018). Genome-wide polygenic scores for common diseases identify individuals with risk equivalent to monogenic mutations. Nature Genetics, 50(9), 1219-1224.</li>
                        <li>Estruch, R., Ros, E., Salas-Salvadó, J., Covas, M. I., Corella, D., Arós, F., ... & PREDIMED Study Investigators. (2018). Primary prevention of cardiovascular disease with a Mediterranean diet supplemented with extra-virgin olive oil or nuts. New England Journal of Medicine, 378(25), e34.</li>
                        <li>Benjamin, E. J., Muntner, P., Alonso, A., Bittencourt, M. S., Callaway, C. W., Carson, A. P., ... & Stroke Statistics Subcommittee. (2019). Heart disease and stroke statistics—2019 update: a report from the American Heart Association. Circulation, 139(10), e56-e528.</li>
                    </ol>
                </div>
            </div>
        </div>
    </div>
    <script>
        // Data for visualizations
        
        // Heart Disease Trends Data
        const trendData = {
            labels: ['2000', '2005', '2010', '2015', '2020', '2024'],
            datasets: [
                {
                    label: 'Overall',
                    data: [12.5, 12.2, 11.8, 11.2, 10.8, 10.6],
                    backgroundColor: 'rgba(245, 101, 101, 0.7)',
                    borderColor: 'rgb(229, 62, 62)',
                    borderWidth: 1
                },
                {
                    label: 'Male',
                    data: [13.8, 13.4, 12.9, 12.3, 11.7, 11.4],
                    backgroundColor: 'rgba(237, 137, 137, 0.7)',
                    borderColor: 'rgb(197, 48, 48)',
                    borderWidth: 1
                },
                {
                    label: 'Female',
                    data: [11.2, 11.0, 10.7, 10.1, 9.9, 9.8],
                    backgroundColor: 'rgba(246, 135, 179, 0.7)',
                    borderColor: 'rgb(213, 63, 140)',
                    borderWidth: 1
                }
            ]
        };
        
        // Feature Importance Data
        const featureImportanceData = [
            { feature: 'Blood Pressure', importance: 0.195 },
            { feature: 'Cholesterol Profile', importance: 0.178 },
            { feature: 'Smoking Status', importance: 0.156 },
            { feature: 'Family History', importance: 0.142 },
            { feature: 'Diabetes Status', importance: 0.112 },
            { feature: 'Physical Activity Level', importance: 0.087 },
            { feature: 'Age', importance: 0.078 },
            { feature: 'Body Mass Index', importance: 0.069 },
            { feature: 'Diet Quality', importance: 0.048 },
            { feature: 'Stress Level', importance: 0.035 }
        ].sort((a, b) => b.importance - a.importance);
        
        // Correlation Data
        const correlationData = [
            { feature: 'Hypertension', correlation: 0.78 },
            { feature: 'LDL Cholesterol', correlation: 0.72 },
            { feature: 'Smoking', correlation: 0.68 },
            { feature: 'Family History', correlation: 0.64 },
            { feature: 'Diabetes', correlation: 0.62 },
            { feature: 'Physical Inactivity', correlation: 0.57 },
            { feature: 'Obesity', correlation: 0.54 },
            { feature: 'Stress', correlation: 0.48 },
            { feature: 'Poor Diet', correlation: 0.46 },
            { feature: 'HDL Cholesterol', correlation: -0.58 }
        ].sort((a, b) => Math.abs(b.correlation) - Math.abs(a.correlation));
        
        // Environmental Factors Data
        const environmentalFactorsData = [
            { factor: 'Air Pollution', impact: 0.58 },
            { factor: 'Healthcare Access', impact: -0.55 },
            { factor: 'Socioeconomic Status', impact: -0.52 },
            { factor: 'Food Environment', impact: 0.48 },
            { factor: 'Neighborhood Walkability', impact: -0.45 },
            { factor: 'Social Isolation', impact: 0.42 },
            { factor: 'Green Space Access', impact: -0.38 },
            { factor: 'Climate Extremes', impact: 0.32 }
        ].sort((a, b) => Math.abs(b.impact) - Math.abs(a.impact));
        
        // Complications Chart Data
        const complicationsData = {
            labels: ['Heart Failure', 'Stroke', 'Arrhythmias', 'Sudden Cardiac Death', 'Peripheral Artery Disease', 'Kidney Disease'],
            datasets: [
                {
                    label: 'Relative Risk',
                    data: [4.6, 3.7, 3.2, 4.2, 2.8, 2.5],
                    backgroundColor: [
                        'rgba(245, 101, 101, 0.7)',
                        'rgba(236, 85, 85, 0.7)',
                        'rgba(229, 62, 62, 0.7)',
                        'rgba(197, 48, 48, 0.7)',
                        'rgba(155, 44, 44, 0.7)',
                        'rgba(159, 18, 57, 0.7)'
                    ],
                    borderColor: [
                        'rgb(229, 62, 62)',
                        'rgb(220, 38, 38)',
                        'rgb(197, 48, 48)',
                        'rgb(155, 44, 44)',
                        'rgb(127, 29, 29)',
                        'rgb(131, 24, 67)'
                    ],
                    borderWidth: 1
                }
            ]
        };
        
        // Intervention Effectiveness Data
        const interventionData = {
            labels: ['Statins', 'Blood Pressure Meds', 'Aspirin', 'Diet Changes', 'Exercise', 'Smoking Cessation', 'Combined Approach'],
            datasets: [
                {
                    label: 'Risk Reduction (%)',
                    data: [25, 28, 15, 22, 20, 36, 48],
                    backgroundColor: [
                        'rgba(245, 101, 101, 0.7)',
                        'rgba(236, 85, 85, 0.7)',
                        'rgba(229, 62, 62, 0.7)',
                        'rgba(72, 187, 120, 0.7)',
                        'rgba(56, 161, 105, 0.7)',
                        'rgba(79, 209, 197, 0.7)',
                        'rgba(159, 122, 234, 0.7)'
                    ],
                    borderColor: [
                        'rgb(229, 62, 62)',
                        'rgb(220, 38, 38)',
                        'rgb(197, 48, 48)',
                        'rgb(56, 161, 105)',
                        'rgb(47, 133, 90)',
                        'rgb(49, 151, 149)',
                        'rgb(128, 90, 213)'
                    ],
                    borderWidth: 1
                }
            ]
        };
        
        // Region Chart Data
        const regionData = {
            labels: ['Northeast', 'Midwest', 'South', 'West', 'Urban', 'Suburban', 'Rural'],
            datasets: [
                {
                    label: 'Heart Disease Prevalence (%)',
                    data: [9.2, 11.5, 14.8, 7.2, 8.6, 10.2, 13.4],
                    backgroundColor: [
                        'rgba(245, 101, 101, 0.7)',
                        'rgba(236, 85, 85, 0.7)',
                        'rgba(229, 62, 62, 0.7)',
                        'rgba(72, 187, 120, 0.7)',
                        'rgba(79, 209, 197, 0.7)',
                        'rgba(159, 122, 234, 0.7)',
                        'rgba(129, 140, 248, 0.7)'
                    ],
                    borderColor: [
                        'rgb(229, 62, 62)',
                        'rgb(220, 38, 38)',
                        'rgb(197, 48, 48)',
                        'rgb(56, 161, 105)',
                        'rgb(49, 151, 149)',
                        'rgb(128, 90, 213)',
                        'rgb(104, 117, 245)'
                    ],
                    borderWidth: 1
                }
            ]
        };
        
        // Outcome Chart Data
        const outcomeData = {
            labels: ['10% BP Reduction', '20% BP Reduction', '30% Cholesterol Reduction', '50% Cholesterol Reduction', 'Smoking Cessation'],
            datasets: [
                {
                    label: 'Heart Attack Risk Reduction (%)',
                    data: [20, 30, 25, 45, 36],
                    backgroundColor: 'rgba(245, 101, 101, 0.7)',
                    borderColor: 'rgb(229, 62, 62)',
                    borderWidth: 1
                },
                {
                    label: 'Stroke Risk Reduction (%)',
                    data: [25, 35, 20, 36, 32],
                    backgroundColor: 'rgba(236, 85, 85, 0.7)',
                    borderColor: 'rgb(220, 38, 38)',
                    borderWidth: 1
                },
                {
                    label: 'Mortality Reduction (%)',
                    data: [15, 25, 22, 38, 30],
                    backgroundColor: 'rgba(72, 187, 120, 0.7)',
                    borderColor: 'rgb(56, 161, 105)',
                    borderWidth: 1
                }
            ]
        };
        
        // ROC Data
        const rocData = {
            labels: [0, 0.1, 0.2, 0.3, 0.4, 0.5, 0.6, 0.7, 0.8, 0.9, 1.0],
            datasets: [
                {
                    label: 'XGBoost (AUC = 0.912)',
                    data: [
                        {x: 0, y: 0},
                        {x: 0.02, y: 0.28},
                        {x: 0.05, y: 0.55},
                        {x: 0.08, y: 0.72},
                        {x: 0.12, y: 0.82},
                        {x: 0.17, y: 0.87},
                        {x: 0.25, y: 0.92},
                        {x: 0.35, y: 0.95},
                        {x: 0.5, y: 0.98},
                        {x: 0.72, y: 0.99},
                        {x: 1.0, y: 1.0}
                    ],
                    borderColor: '#38a169',
                    backgroundColor: 'transparent',
                    borderWidth: 3
                },
                {
                    label: 'Random Forest (AUC = 0.896)',
                    data: [
                        {x: 0, y: 0},
                        {x: 0.03, y: 0.25},
                        {x: 0.06, y: 0.52},
                        {x: 0.1, y: 0.68},
                        {x: 0.15, y: 0.78},
                        {x: 0.2, y: 0.85},
                        {x: 0.28, y: 0.90},
                        {x: 0.4, y: 0.93},
                        {x: 0.56, y: 0.96},
                        {x: 0.75, y: 0.98},
                        {x: 1.0, y: 1.0}
                    ],
                    borderColor: '#f56565',
                    backgroundColor: 'transparent',
                    borderWidth: 3
                },
                {
                    label: 'Gradient Boosting (AUC = 0.889)',
                    data: [
                        {x: 0, y: 0},
                        {x: 0.04, y: 0.23},
                        {x: 0.07, y: 0.48},
                        {x: 0.12, y: 0.64},
                        {x: 0.17, y: 0.76},
                        {x: 0.23, y: 0.83},
                        {x: 0.3, y: 0.88},
                        {x: 0.42, y: 0.92},
                        {x: 0.58, y: 0.95},
                        {x: 0.78, y: 0.98},
                        {x: 1.0, y: 1.0}
                    ],
                    borderColor: '#9f7aea',
                    backgroundColor: 'transparent',
                    borderWidth: 3
                },
                {
                    label: 'Baseline',
                    data: [
                        {x: 0, y: 0},
                        {x: 1, y: 1}
                    ],
                    borderColor: '#a0aec0',
                    backgroundColor: 'transparent',
                    borderWidth: 2,
                    borderDash: [5, 5]
                }
            ]
        };
        
        // Confusion Matrix Data
        const confusionMatrixData = [
            [78, 9],  // True Negative, False Positive
            [8, 72]   // False Negative, True Positive
        ];

        // Initialize Trends Chart
        const trendChart = new Chart(
            document.getElementById('trendChart'),
            {
                type: 'line',
                data: trendData,
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'top',
                        },
                        title: {
                            display: false
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            title: {
                                display: true,
                                text: 'Prevalence (%)'
                            }
                        },
                        x: {
                            title: {
                                display: true,
                                text: 'Year'
                            }
                        }
                    }
                }
            }
        );
        
        // Initialize Complications Chart
        const complicationsChart = new Chart(
            document.getElementById('complicationsChart'),
            {
                type: 'bar',
                data: complicationsData,
                options: {
                    indexAxis: 'y',
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            display: false
                        },
                        title: {
                            display: true,
                            text: 'Relative Risk of Complications with Heart Disease'
                        }
                    },
                    scales: {
                        x: {
                            title: {
                                display: true,
                                text: 'Relative Risk (x times)'
                            }
                        }
                    }
                }
            }
        );
        
        // Initialize Intervention Chart
        const interventionChart = new Chart(
            document.getElementById('interventionChart'),
            {
                type: 'bar',
                data: interventionData,
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            display: false
                        },
                        title: {
                            display: false
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            title: {
                                display: true,
                                text: 'Risk Reduction (%)'
                            }
                        }
                    }
                }
            }
        );
        
        // Initialize Region Chart
        const regionChart = new Chart(
            document.getElementById('regionChart'),
            {
                type: 'bar',
                data: regionData,
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            display: false
                        },
                        title: {
                            display: false
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            title: {
                                display: true,
                                text: 'Heart Disease Prevalence (%)'
                            }
                        }
                    }
                }
            }
        );
        
        // Initialize Outcome Chart
        const outcomeChart = new Chart(
            document.getElementById('outcomeChart'),
            {
                type: 'bar',
                data: outcomeData,
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'top',
                        },
                        title: {
                            display: false
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            title: {
                                display: true,
                                text: 'Reduction (%)'
                            }
                        }
                    }
                }
            }
        );
        
        // Initialize ROC Chart
        const rocChart = new Chart(
            document.getElementById('rocChart'),
            {
                type: 'scatter',
                data: rocData,
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'top',
                        },
                        title: {
                            display: true,
                            text: 'ROC Curves for Top Models'
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            title: {
                                display: true,
                                text: 'True Positive Rate'
                            },
                            max: 1
                        },
                        x: {
                            beginAtZero: true,
                            title: {
                                display: true,
                                text: 'False Positive Rate'
                            },
                            max: 1
                        }
                    },
                    elements: {
                        line: {
                            tension: 0.4
                        }
                    }
                }
            }
        );
        
        // Feature Importance Bars
        const featureImportanceEl = document.getElementById('featureImportance');
        const maxImportance = Math.max(...featureImportanceData.map(d => d.importance));
        
        // Function to get gradient color for bars
        function getGradientColor(value, max) {
            // Use a red gradient from lighter to darker
            const intensity = Math.round((value / max) * 255);
            return `rgb(${245 - (1 - value/max) * 50}, ${101 - (1 - value/max) * 50}, ${101 - (1 - value/max) * 50})`;
        }
        
        featureImportanceData.forEach(feature => {
            const barWidth = (feature.importance / maxImportance) * 100;
            const featureBar = document.createElement('div');
            featureBar.className = 'feature-bar';
            
            featureBar.innerHTML = `
                <div class="feature-name">${feature.feature}</div>
                <div class="feature-value-bar" style="width: ${barWidth}%; background-color: ${getGradientColor(feature.importance, maxImportance)}"></div>
                <div class="feature-value">${feature.importance.toFixed(3)}</div>
            `;
            
            featureImportanceEl.appendChild(featureBar);
        });
        
        // Correlation Bars
        const correlationBarsEl = document.getElementById('correlationBars');
        const maxCorrelation = Math.max(...correlationData.map(d => Math.abs(d.correlation)));
        
        // Function to get correlation color (positive correlations in red, negative in green)
        function getCorrelationColor(value) {
            if (value >= 0) {
                // Red for positive (increases risk)
                return `rgb(245, 101, 101)`;
            } else {
                // Green for negative (decreases risk)
                return `rgb(72, 187, 120)`;
            }
        }
        
        correlationData.forEach(feature => {
            const barWidth = (Math.abs(feature.correlation) / maxCorrelation) * 100;
            const correlationBar = document.createElement('div');
            correlationBar.className = 'feature-bar';
            
            correlationBar.innerHTML = `
                <div class="feature-name">${feature.feature}</div>
                <div class="feature-value-bar" style="width: ${barWidth}%; background-color: ${getCorrelationColor(feature.correlation)}"></div>
                <div class="feature-value">${feature.correlation > 0 ? '+' : ''}${feature.correlation.toFixed(2)}</div>
            `;
            
            correlationBarsEl.appendChild(correlationBar);
        });
        
        // Environmental Factors Bars
        const environmentalFactorsEl = document.getElementById('environmentalFactors');
        const maxImpact = Math.max(...environmentalFactorsData.map(d => Math.abs(d.impact)));
        
        environmentalFactorsData.forEach(item => {
            const barWidth = (Math.abs(item.impact) / maxImpact) * 100;
            const impactBar = document.createElement('div');
            impactBar.className = 'feature-bar';
            
            // Use color coding - positive impact (increases risk) in red, negative impact (decreases risk) in green
            const barColor = item.impact > 0 ? '#f56565' : '#48bb78';
            
            impactBar.innerHTML = `
                <div class="feature-name">${item.factor}</div>
                <div class="feature-value-bar" style="width: ${barWidth}%; background-color: ${barColor}"></div>
                <div class="feature-value">${item.impact > 0 ? '+' : ''}${item.impact.toFixed(2)}</div>
            `;
            
            environmentalFactorsEl.appendChild(impactBar);
        });
        
        // Confusion Matrix Heatmap
        const confusionMatrixEl = document.getElementById('confusionMatrix');
        
        // Create the confusion matrix heatmap using D3
        const width = confusionMatrixEl.offsetWidth;
        const height = confusionMatrixEl.offsetHeight;
        const margin = { top: 40, right: 40, bottom: 40, left: 40 };
        
        const svg = d3.select('#confusionMatrix')
            .append('svg')
            .attr('width', width)
            .attr('height', height);
            
        const innerWidth = width - margin.left - margin.right;
        const innerHeight = height - margin.top - margin.bottom;
        
        // Create a group for the heatmap
        const g = svg.append('g')
            .attr('transform', `translate(${margin.left}, ${margin.top})`);
        
        // Define the color scale
        const colorScale = d3.scaleLinear()
            .domain([0, d3.max(confusionMatrixData, row => d3.max(row))])
            .range(['#fff5f5', '#f56565']);
        
        // Define the size of each cell
        const cellSize = Math.min(innerWidth, innerHeight) / 2;
        
        // Create the heatmap
        const cells = g.selectAll('rect')
            .data(confusionMatrixData.flat())
            .enter()
            .append('rect')
            .attr('width', cellSize)
            .attr('height', cellSize)
            .attr('x', (d, i) => (i % 2) * cellSize)
            .attr('y', (d, i) => Math.floor(i / 2) * cellSize)
            .attr('fill', d => colorScale(d))
            .attr('stroke', '#fff')
            .attr('stroke-width', 2);
            
        // Add text to each cell
        g.selectAll('text')
            .data(confusionMatrixData.flat())
            .enter()
            .append('text')
            .attr('x', (d, i) => (i % 2) * cellSize + cellSize / 2)
            .attr('y', (d, i) => Math.floor(i / 2) * cellSize + cellSize / 2)
            .attr('text-anchor', 'middle')
            .attr('dominant-baseline', 'middle')
            .attr('font-size', '18px')
            .attr('font-weight', 'bold')
            .attr('fill', d => d > 30 ? '#fff' : '#2d3748')
            .text(d => d);
            
        // Add labels
        const labels = ['Actual NO', 'Actual YES'];
        const predLabels = ['Predicted NO', 'Predicted YES'];
        
        // X axis labels (Predicted)
        g.selectAll('.pred-label')
            .data(predLabels)
            .enter()
            .append('text')
            .attr('class', 'pred-label')
            .attr('x', (d, i) => i * cellSize + cellSize / 2)
            .attr('y', -10)
            .attr('text-anchor', 'middle')
            .attr('font-size', '12px')
            .text(d => d);
            
        // Y axis labels (Actual)
        g.selectAll('.actual-label')
            .data(labels)
            .enter()
            .append('text')
            .attr('class', 'actual-label')
            .attr('x', -10)
            .attr('y', (d, i) => i * cellSize + cellSize / 2)
            .attr('text-anchor', 'end')
            .attr('dominant-baseline', 'middle')
            .attr('font-size', '12px')
            .text(d => d);
            
        // Create tooltip
        const tooltip = d3.select('body')
            .append('div')
            .attr('class', 'tooltip')
            .style('opacity', 0);
            
        // Add hover effects
        cells.on('mouseover', function(event, d) {
                const i = confusionMatrixData.flat().indexOf(d);
                const row = Math.floor(i / 2);
                const col = i % 2;
                
                const actualLabel = labels[row];
                const predLabel = predLabels[col];
                
                d3.select(this)
                    .attr('stroke', '#e53e3e')
                    .attr('stroke-width', 3);
                    
                tooltip.transition()
                    .duration(200)
                    .style('opacity', 0.9);
                    
                tooltip.html(`${actualLabel}<br>${predLabel}<br>Count: ${d}`)
                    .style('left', (event.pageX + 10) + 'px')
                    .style('top', (event.pageY - 28) + 'px');
            })
            .on('mouseout', function() {
                d3.select(this)
                    .attr('stroke', '#fff')
                    .attr('stroke-width', 2);
                    
                tooltip.transition()
                    .duration(500)
                    .style('opacity', 0);
            });
            
        // Simple US Map for Region Visualization
        const regionMapEl = document.getElementById('regionMap');
        
        // Create a simplified US region map
        const mapWidth = regionMapEl.offsetWidth;
        const mapHeight = regionMapEl.offsetHeight;
        const mapSvg = d3.select('#regionMap')
            .append('svg')
            .attr('width', mapWidth)
            .attr('height', mapHeight);
            
        // Define regions and their heart disease rates
        const regions = [
            { name: 'Northeast', rate: 9.2, x: mapWidth * 0.75, y: mapHeight * 0.25, radius: 40 },
            { name: 'Midwest', rate: 11.5, x: mapWidth * 0.45, y: mapHeight * 0.35, radius: 50 },
            { name: 'South', rate: 14.8, x: mapWidth * 0.55, y: mapHeight * 0.65, radius: 65 },
            { name: 'West', rate: 7.2, x: mapWidth * 0.20, y: mapHeight * 0.40, radius: 35 }
        ];
        
        // Color scale for heart disease rates
        const regionColorScale = d3.scaleLinear()
            .domain([7, 15])  // Min and max heart disease rates
            .range(['#fed7d7', '#e53e3e']);  // Light red to dark red
            
        // Add regions as circles with size proportional to heart disease rate
        mapSvg.selectAll('circle')
            .data(regions)
            .enter()
            .append('circle')
            .attr('cx', d => d.x)
            .attr('cy', d => d.y)
            .attr('r', d => d.radius)
            .attr('fill', d => regionColorScale(d.rate))
            .attr('stroke', '#ffffff')
            .attr('stroke-width', 2)
            .attr('opacity', 0.8);
            
        // Add region labels
        mapSvg.selectAll('text')
            .data(regions)
            .enter()
            .append('text')
            .attr('x', d => d.x)
            .attr('y', d => d.y)
            .attr('text-anchor', 'middle')
            .attr('dominant-baseline', 'middle')
            .attr('font-size', '12px')
            .attr('font-weight', 'bold')
            .attr('fill', '#ffffff')
            .text(d => `${d.name}\n${d.rate}%`);
            
        // Add a legend
        const legendGroup = mapSvg.append('g')
            .attr('transform', `translate(${mapWidth - 150}, ${mapHeight - 100})`);
            
        legendGroup.append('text')
            .attr('x', 0)
            .attr('y', 0)
            .attr('font-size', '12px')
            .attr('font-weight', 'bold')
            .text('Heart Disease Rate (%)');
            
        const legendValues = [7, 9, 11, 13, 15];
        
        legendValues.forEach((value, i) => {
            legendGroup.append('rect')
                .attr('x', 0)
                .attr('y', 20 + i * 20)
                .attr('width', 15)
                .attr('height', 15)
                .attr('fill', regionColorScale(value));
                
            legendGroup.append('text')
                .attr('x', 25)
                .attr('y', 20 + i * 20 + 12)
                .attr('font-size', '12px')
                .text(value + '%');
        });
        
        // Initialize Tabs
        document.querySelectorAll('.tab').forEach(tab => {
            tab.addEventListener('click', () => {
                const tabId = tab.getAttribute('data-tab');
                
                // Update active tab
                document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
                tab.classList.add('active');
                
                // Update active content
                document.querySelectorAll('.tab-content').forEach(content => content.classList.remove('active'));
                document.getElementById(`${tabId}-tab`).classList.add('active');
            });
        });
    </script>
</body>
</html>
